const superagent = require("superagent")

async function coronaVirus(country, type) {
   if(!country){
   return superagent
    .get("https://corona.lmao.ninja/all")
    .then(res => {
        return res.body;
    })
   } else {
      if(typeof country !== "string") throw "Your country must be a string!"
      return superagent
      .get(`https://corona.lmao.ninja/countries/${country}`)
      .then(res => {
        if(!type){
          return res.body;
        } else {
            if(typeof type !== "string") throw "Your type is not a string!"
          if(type === "country"){
            return res.body.country;
          } else if(type === "cases"){
            return res.body.cases;
          } else if(type === "todayCases"){
            return res.body.todayCases;
          } if(type === "deaths"){
            return res.body.deaths;
          } if(type === "todayDeaths"){
            return res.body.todayDeaths;
          } if(type === "recovered"){
            return res.body.recovered;
          } if(type === "active"){
            return res.body.active;
          } if(type === "critical"){
            return res.body.critical;
          } if(type === "casesPerOneMillion"){
            return res.body.casesPerOneMillion;
          }
        }
      })
      .catch(err => {
        console.log(err)
      })
   }
}

module.exports.coronaVirus = coronaVirus
